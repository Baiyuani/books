# 已废弃
# 部署es
```bash
helm upgrade --install es bitnami/elasticsearch -n log \
--version=19.1.1 \
--set global.storageClass='nfs-client' \
--set plugins='' \
--set security.elasticPassword='xxx' \
--set ingress.enabled='true' \
--set ingress.hostname='elasticsearch.local' \
--set master.replicaCount=1 \
--set master.persistence.size='8Gi' \
--set data.replicaCount=1 \
--set data.persistence.size='8Gi' \
--set coordinating.replicaCount=1 \
--set ingest.replicaCount=1 


```


# 部署kibana
```bash
helm upgrade --install kibana bitnami/kibana -n log \
--version=10.1.16 \
--set global.storageClass='nfs-client' \
--set elasticsearch.hosts[0]='elasticsearch.local' \
--set elasticsearch.port='9200' \
--set persistence.size='10Gi' \
--set ingress.enabled='true' \
--set ingress.hostname='kibana.local' 
```



# 部署logstash
```bash
helm upgrade --install logstash bitnami/logstash -n log -f logstash-values.yaml \
--version=5.0.13 \
--set global.storageClass='nfs-client' \
--set persistence.size='2Gi' 
```


# 部署filebeat
- 可选方式daemonset或者sidecar
```bash
#kubectl -n log create serviceaccount filebeat
#kubectl create clusterrolebinding filebeat --clusterrole=cluster-admin --serviceaccount=log:filebeat
kubectl apply -f filebeat-daemonset.yaml 
kubectl -n log rollout restart ds filebeat
```

